(function(){"use strict";(r=>{var o;try{if(typeof window>"u")return;var e=document.createElement("style");e.appendChild(document.createTextNode(r));const i=(o=document.querySelector('meta[property="csp-nonce"]'))==null?void 0:o.getAttribute("nonce");i&&e.setAttribute("nonce",i),document.head.appendChild(e)}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.voice-visualizer__relative{position:relative}.voice-visualizer__spinner-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.voice-visualizer__spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:voice-visualizer__spin 1s ease-in-out infinite;-webkit-animation:voice-visualizer__spin 1s ease-in-out infinite}@keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}@-webkit-keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}")})();
(function(x,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],c):(x=typeof globalThis<"u"?globalThis:x||self,c(x["react-voice-visualizer"]={},x["react/jsx-runtime"],x.React))})(this,function(x,c,t){"use strict";const be=({canvas:e,backgroundColor:r})=>{const n=e.height,s=e.width,o=Math.round(s/2),h=e.getContext("2d");return h?(h.clearRect(0,0,s,n),r!=="transparent"&&(h.fillStyle=r,h.fillRect(0,0,s,n)),{context:h,height:n,width:s,halfWidth:o}):null},Le=({context:e,color:r,rounded:n,x:s,y:o,w:h,h:y})=>{e.fillStyle=r,e.beginPath(),e.roundRect?(e.roundRect(s,o,h,y,n),e.fill()):e.fillRect(s,o,h,y)},We=({barsData:e,canvas:r,barWidth:n,gap:s,backgroundColor:o,mainBarColor:h,secondaryBarColor:y,currentAudioTime:l=0,rounded:M,duration:m})=>{const L=be({canvas:r,backgroundColor:o});if(!L)return;const{context:z,height:g}=L,w=l/m;e.forEach((v,f)=>{const p=f/e.length,u=w>p;Le({context:z,color:u?y:h,rounded:M,x:f*(n+s*n),y:g/2-v.max,h:v.max*2,w:n})})};function Ve({context:e,color:r,rounded:n,width:s,height:o,barWidth:h}){Le({context:e,color:r,rounded:n,x:s/2+h/2,y:o/2-1,h:2,w:s-(s/2+h/2)})}const Je=({audioData:e,unit:r,index:n,index2:s,canvas:o,isRecordingInProgress:h,isPausedRecording:y,picks:l,backgroundColor:M,barWidth:m,mainBarColor:L,secondaryBarColor:z,rounded:g,animateCurrentPick:w,fullscreen:v})=>{const f=be({canvas:o,backgroundColor:M});if(!f)return;const{context:p,height:u,width:$,halfWidth:F}=f;if(e!=null&&e.length&&h){const O=Math.max(...e);if(!y){if(s.current>=m){s.current=0;const N=(u-O/258*u)/u*100,J=(-u+O/258*u*2)/u*100,re=n.current===m?{startY:N,barHeight:J}:null;n.current>=r?n.current=m:n.current+=m,l.length>(v?$:F)/m&&l.pop(),l.unshift(re)}s.current+=1}!v&&Y(),w&&Le({context:p,rounded:g,color:L,x:v?$:F,y:u-O/258*u,h:-u+O/258*u*2,w:m});let G=(v?$:F)-s.current;l.forEach(N=>{N&&Le({context:p,color:L,rounded:g,x:G,y:N.startY*u/100>u/2-1?u/2-1:N.startY*u/100,h:N.barHeight*u/100>2?N.barHeight*u/100:2,w:m}),G-=m})}else l.length=0;function Y(){Ve({context:p,color:z,rounded:g,width:$,height:u,barWidth:m})}},Oe=e=>{const r=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60,o=Math.floor((s-Math.floor(s))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(s)).padStart(2,"0")}:${String(o).charAt(0)}`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(s)).padStart(2,"0")}:${String(o).charAt(0)}`:`${String(Math.floor(s)).padStart(2,"0")}:${String(o).charAt(0)}`},Re=e=>{const r=Math.floor(e/1e3),n=Math.floor(r/3600),s=Math.floor(r%3600/60),o=r%60;return n>0?`${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`};function Ze(e){if(typeof e=="string"){const r=Number(e);if(!Number.isNaN(r))return`${Math.trunc(r/2)*2}px`}return e}const Xe=({bufferData:e,height:r,width:n,barWidth:s,gap:o})=>{const h=n/(s+o*s),y=Math.floor(e.length/h),l=r/2;let M=[],m=0;for(let L=0;L<h;L++){const z=[];let g=0;for(let v=0;v<y&&L*y+v<e.length;v++){const f=e[L*y+v];f>0&&(z.push(f),g++)}const w=z.reduce((v,f)=>v+f,0)/g;w>m&&(m=w),M.push({max:w})}if(l*.95>m*l){const L=l*.95/m;M=M.map(z=>({max:z.max>.01?z.max*L:1}))}return M},qe=e=>{if(!e)return"";const r=e.match(/audio\/([^;]+)/);return r&&r.length>=2?`.${r[1]}`:""},Ke=e=>{const r=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60,o=Math.floor((s-Math.floor(s))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(s)).padStart(2,"0")}}h`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(s)).padStart(2,"0")}m`:`${String(Math.floor(s)).padStart(2,"0")}:${String(o).charAt(0)}${String(o).charAt(1)}s`},et=e=>{onmessage=r=>{postMessage(e(r.data))}};function tt({fn:e,initialValue:r,onMessageReceived:n}){const[s,o]=t.useState(r);return{result:s,setResult:o,run:y=>{const l=new Worker(URL.createObjectURL(new Blob([`(${et})(${e})`])));l.onmessage=M=>{M.data&&(o(M.data),n&&n(),l.terminate())},l.onerror=M=>{console.error(M.message),l.terminate()},l.postMessage(y)}}}const rt=(e,r=250)=>{const n=t.useRef();return t.useCallback((...s)=>{const o=()=>{clearTimeout(n.current),e(...s)};clearTimeout(n.current),n.current=setTimeout(o,r)},[e,r])},mt="",nt=({color:e="#000000",stroke:r=2,className:n})=>c.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:c.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:e,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round"})}),He=({color:e="#FFFFFF",reflect:r})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${r?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:c.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:e})}),Ue="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxwYXRoIGQ9Ik0xLjEgMTYuNzJjMCAzIC45NiA1LjggMy42MSA3Ljk1YTkuOTYgOS45NiAwIDAgMCA2LjUgMi4xN20wIDB2NC4zNGg0LjM0LTguNjdtNC4zNC00LjM0YzIuMzUgMCA0LjQyLS40OCA2LjUtMi4xN2E5Ljg3IDkuODcgMCAwIDAgMy42MS03Ljk1TTExLjIyIDEuODJjLTEuNDUgMC0yLjUuMzctMy4zLjkzYTUuNiA1LjYgMCAwIDAtMS44NCAyLjRjLS45IDIuMDYtMS4xIDQuNzctMS4xIDcuMjQgMCAyLjQ2LjIgNS4xNyAxLjEgNy4yNGE1LjYgNS42IDAgMCAwIDEuODQgMi40Yy44LjU1IDEuODUuOTIgMy4zLjkyIDEuNDQgMCAyLjUtLjM3IDMuMjktLjkzYTUuNiA1LjYgMCAwIDAgMS44NC0yLjRjLjktMi4wNiAxLjEtNC43NyAxLjEtNy4yMyAwLTIuNDctLjItNS4xOC0xLjEtNy4yNGE1LjYgNS42IDAgMCAwLTEuODQtMi40IDUuNTIgNS41MiAwIDAgMC0zLjMtLjkzWiIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K",st="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxwYXRoIGQ9Ik0xOC43NSA2LjE2YzQuMzEgMi42IDYuNDYgMy45IDYuNDYgNS44NCAwIDEuOTUtMi4xNSAzLjI0LTYuNDYgNS44NGwtNC44NCAyLjkyYy00LjMxIDIuNi02LjQ2IDMuODktOC4wOCAyLjkyLTEuNjItLjk4LTEuNjItMy41Ny0xLjYyLTguNzZWOS4wOGMwLTUuMTkgMC03Ljc4IDEuNjItOC43NiAxLjYyLS45NyAzLjc3LjMzIDguMDggMi45Mmw0Ljg0IDIuOTJaIiBmaWxsPSIjZmZmIi8+DQo8L3N2Zz4NCg==",ke="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxwYXRoIGQ9Ik0xNCAzLjVhMy41IDMuNSAwIDEgMSA3IDB2MjJhMy41IDMuNSAwIDEgMS03IDB2LTIyWiIgZmlsbD0iI2ZmZiIvPg0KICA8cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyOSIgcng9IjMuNSIgZmlsbD0iI2ZmZiIvPg0KPC9zdmc+DQo=",it="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxyZWN0IHg9Ii4yMSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI1IiByeD0iNSIgZmlsbD0iI2ZmZiIvPg0KPC9zdmc+DQo=",ct=({controls:{audioRef:e,audioData:r,isRecordingInProgress:n,recordedBlob:s,duration:o,currentAudioTime:h,audioSrc:y,bufferFromRecordedBlob:l,togglePauseResume:M,startRecording:m,stopRecording:L,saveAudioFile:z,isAvailableRecordedAudio:g,isPausedRecordedAudio:w,isPausedRecording:v,isProcessingStartRecording:f,isProcessingRecordedAudio:p,isCleared:u,formattedDuration:$,formattedRecordingTime:F,formattedRecordedAudioCurrentTime:Y,clearCanvas:O,setCurrentAudioTime:G,isProcessingOnResize:N,_setIsProcessingOnResize:J,_setIsProcessingAudioOnComplete:re},width:B="100%",height:me=200,speed:ne=3,backgroundColor:P="transparent",mainBarColor:b="#FFFFFF",secondaryBarColor:Z="#5e5e5e",barWidth:se=2,gap:we=1,rounded:H=5,isControlPanelShown:ie=!0,isDownloadAudioButtonShown:R=!1,animateCurrentPick:ce=!0,fullscreen:oe=!1,onlyRecording:X=!1,isDefaultUIShown:fe=!0,defaultMicrophoneIconColor:_e=b,defaultAudioWaveIconColor:de=b,mainContainerClassName:ze,canvasContainerClassName:ae,isProgressIndicatorShown:Ne=!X,progressIndicatorClassName:ue,isProgressIndicatorTimeShown:S=!0,progressIndicatorTimeClassName:U,isProgressIndicatorOnHoverShown:q=!X,progressIndicatorOnHoverClassName:he,isProgressIndicatorTimeOnHoverShown:K=!0,progressIndicatorTimeOnHoverClassName:A,isAudioProcessingTextShown:_=!0,audioProcessingTextClassName:a,controlButtonsClassName:ge})=>{const[Ie,Ce]=t.useState(0),[j,Te]=t.useState(0),[le,je]=t.useState(0),[Me,xe]=t.useState(0),[Q,ve]=t.useState(!1),[De,$e]=t.useState(window.innerWidth),[Ae,W]=t.useState(!1),Ee=De<768,ee=Math.trunc(ne),te=Math.trunc(we),C=Math.trunc(Ee&&te>0?se+1:se),pe=C+te*C,I=t.useRef(null),i=t.useRef([]),d=t.useRef(ee),k=t.useRef(C),V=t.useRef(C),T=t.useRef(null),{result:Se,setResult:at,run:ut}=tt({fn:Xe,initialValue:[],onMessageReceived:lt}),ht=rt(Fe);t.useEffect(()=>{if(!T.current)return;const D=()=>{$e(window.innerWidth),g?(J(!0),W(!0),ht()):Fe()},E=new ResizeObserver(D);return E.observe(T.current),()=>{E.disconnect()}},[B,g]),t.useLayoutEffect(()=>{I.current&&((d.current>=ee||!r.length)&&(d.current=r.length?0:ee,Je({audioData:r,unit:pe,index:k,index2:V,canvas:I.current,picks:i.current,isRecordingInProgress:n,isPausedRecording:v,backgroundColor:P,mainBarColor:b,secondaryBarColor:Z,barWidth:C,rounded:H,animateCurrentPick:ce,fullscreen:oe})),d.current+=1)},[I.current,r,C,P,b,Z,H,oe,fe,Me]),t.useEffect(()=>{var D,E;if(g)return Q?(D=I.current)==null||D.addEventListener("mouseleave",Ge):(E=I.current)==null||E.addEventListener("mouseenter",Ye),()=>{var ye,Qe;Q?(ye=I.current)==null||ye.removeEventListener("mouseleave",Ge):(Qe=I.current)==null||Qe.removeEventListener("mouseenter",Ye)}},[Q,g]),t.useEffect(()=>{var E;if(!l||!I.current||n||Ae)return;if(X){O();return}i.current=[];const D=l.getChannelData(0);return ut({bufferData:D,height:le,width:Me,barWidth:C,gap:te}),(E=I.current)==null||E.addEventListener("mousemove",Be),()=>{var ye;(ye=I.current)==null||ye.removeEventListener("mousemove",Be)}},[l,j,le,we,se,Ae]),t.useEffect(()=>{if(!(X||!(Se!=null&&Se.length)||!I.current||p)){if(u){at([]);return}We({barsData:Se,canvas:I.current,barWidth:C,gap:te,backgroundColor:P,mainBarColor:b,secondaryBarColor:Z,currentAudioTime:h,rounded:H,duration:o})}},[Se,h,u,H,P,b,Z]),t.useEffect(()=>{p&&I.current&&be({canvas:I.current,backgroundColor:P})},[p]);function Fe(){if(!T.current||!I.current)return;d.current=ee;const D=Math.trunc(T.current.clientHeight*window.devicePixelRatio/2)*2;Te(T.current.clientWidth),je(D),xe(Math.round(T.current.clientWidth*window.devicePixelRatio)),W(!1)}function lt(){J(!1),re(!1),e!=null&&e.current&&!N&&(e.current.src=y)}const Ye=()=>{ve(!0)},Ge=()=>{ve(!1)},Be=D=>{Ce(D.offsetX)},vt=D=>{if(e!=null&&e.current&&I.current){const E=o/j*(D.clientX-I.current.getBoundingClientRect().left);e.current.currentTime=E,G(E)}},Pe=h/o*j;return c.jsxs("div",{className:`voice-visualizer ${ze??""}`,children:[c.jsxs("div",{className:`voice-visualizer__canvas-container ${ae??""}`,ref:T,style:{width:Ze(B)},children:[c.jsx("canvas",{ref:I,width:Me,height:le,onClick:vt,style:{height:Ze(me),width:j},children:"Your browser does not support HTML5 Canvas."}),fe&&u&&c.jsxs(c.Fragment,{children:[c.jsx(He,{color:de}),c.jsx(He,{color:de,reflect:!0}),c.jsx("button",{type:"button",onClick:m,className:"voice-visualizer__canvas-microphone-btn",children:c.jsx(nt,{color:_e,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),_&&p&&c.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${a??""}`,style:{color:b},children:"Processing Audio..."}),Q&&g&&!p&&!Ee&&q&&c.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${he??""}`,style:{left:Ie},children:K&&c.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${j-Ie<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${A??""}`,children:Oe(o/j*Ie)})}),Ne&&g&&!p&&o?c.jsx("div",{className:`voice-visualizer__progress-indicator ${ue??""}`,style:{left:Pe<j-1?Pe:j-1},children:S&&c.jsx("p",{className:`voice-visualizer__progress-indicator-time ${j-h*j/o<70?"voice-visualizer__progress-indicator-time-left":""} ${U??""}`,children:Y})}):null]}),ie&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[n&&c.jsx("p",{className:"voice-visualizer__audio-info-time",children:F}),o&&!p?c.jsx("p",{children:$}):null]}),c.jsxs("div",{className:"voice-visualizer__buttons-container",children:[n&&c.jsx("div",{className:"voice-visualizer__btn-container",children:c.jsx("button",{type:"button",className:`voice-visualizer__btn-left ${v?"voice-visualizer__btn-left-microphone":""}`,onClick:M,children:c.jsx("img",{src:v?Ue:ke,alt:v?"Play":"Pause"})})}),!u&&c.jsx("button",{type:"button",className:`voice-visualizer__btn-left ${n||f?"voice-visualizer__visually-hidden":""}`,onClick:M,disabled:p,children:c.jsx("img",{src:w?st:ke,alt:w?"Play":"Pause"})}),u&&c.jsxs("button",{type:"button",className:`voice-visualizer__btn-center voice-visualizer__relative ${f?"voice-visualizer__btn-center--border-transparent":""}`,onClick:m,disabled:f,children:[f&&c.jsx("div",{className:"voice-visualizer__spinner-wrapper",children:c.jsx("div",{className:"voice-visualizer__spinner"})}),c.jsx("img",{src:Ue,alt:"Microphone"})]}),c.jsx("button",{type:"button",className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${n?"":"voice-visualizer__visually-hidden"}`,onClick:L,children:c.jsx("img",{src:it,alt:"Stop"})}),!u&&c.jsx("button",{type:"button",onClick:O,className:`voice-visualizer__btn ${ge??""}`,disabled:p,children:"Clear"}),R&&s&&c.jsx("button",{type:"button",onClick:z,className:`voice-visualizer__btn ${ge??""}`,disabled:p,children:"Download Audio"})]})]})]})};function ot({onStartRecording:e,onStopRecording:r,onPausedRecording:n,onResumedRecording:s,onClearCanvas:o,onEndAudioPlayback:h,onStartAudioPlayback:y,onPausedAudioPlayback:l,onResumedAudioPlayback:M,onErrorPlayingAudio:m,shouldHandleBeforeUnload:L=!0}={}){const[z,g]=t.useState(!1),[w,v]=t.useState(!1),[f,p]=t.useState(null),[u,$]=t.useState(new Uint8Array(0)),[F,Y]=t.useState(!1),[O,G]=t.useState(null),[N,J]=t.useState(null),[re,B]=t.useState(0),[me,ne]=t.useState(0),[P,b]=t.useState(0),[Z,se]=t.useState(""),[we,H]=t.useState(!0),[ie,R]=t.useState(0),[ce,oe]=t.useState(!0),[X,fe]=t.useState(!1),[_e,de]=t.useState(!1),[ze,ae]=t.useState(null),[Ne,ue]=t.useState(!1),S=t.useRef(null),U=t.useRef(null),q=t.useRef(null),he=t.useRef(null),K=t.useRef(null),A=t.useRef(null),_=t.useRef(null),a=t.useRef(null),ge=!!(N&&!F),Ie=Ke(P),Ce=Re(re),j=Oe(ie),Te=X||F;t.useEffect(()=>{if(!z||w)return;const d=setInterval(()=>{const k=performance.now();B(V=>V+(k-me)),ne(k)},1e3);return()=>clearInterval(d)},[me,w,z]),t.useEffect(()=>{if(ze){W();return}},[ze]),t.useEffect(()=>()=>{W()},[]),t.useEffect(()=>(!ce&&L&&window.addEventListener("beforeunload",le),()=>{window.removeEventListener("beforeunload",le)}),[ce,L]);const le=i=>{i.preventDefault(),i.returnValue=""},je=async i=>{if(i)try{if(i.size===0)throw new Error("Error: The audio blob is empty");const d=URL.createObjectURL(i);se(d);const k=await i.arrayBuffer(),T=await new AudioContext().decodeAudioData(k);J(T),b(T.duration-.06),ae(null)}catch(d){console.error("Error processing the audio blob:",d),ae(d instanceof Error?d:new Error("Error processing the audio blob"))}},Me=i=>{i instanceof Blob&&(W(),de(!0),oe(!1),Y(!0),g(!1),B(0),v(!1),a.current=new Audio,G(i),je(i))},xe=()=>{ue(!0),navigator.mediaDevices.getUserMedia({audio:!0}).then(i=>{oe(!1),ue(!1),g(!0),ne(performance.now()),p(i),U.current=new window.AudioContext,q.current=U.current.createAnalyser(),he.current=new Uint8Array(q.current.frequencyBinCount),K.current=U.current.createMediaStreamSource(i),K.current.connect(q.current),S.current=new MediaRecorder(i),S.current.addEventListener("dataavailable",ve),S.current.start(),e&&e(),Q()}).catch(i=>{ue(!1),ae(i instanceof Error?i:new Error("Error starting audio recording"))})},Q=()=>{q.current.getByteTimeDomainData(he.current),$(new Uint8Array(he.current)),A.current=requestAnimationFrame(Q)},ve=i=>{S.current&&(S.current=null,a.current=new Audio,G(i.data),je(i.data))},De=()=>{a.current&&(R(a.current.currentTime),_.current=requestAnimationFrame(De))},$e=()=>{z||Ne||(ce||W(),xe())},Ae=()=>{z&&(g(!1),S.current&&(S.current.stop(),S.current.removeEventListener("dataavailable",ve)),f==null||f.getTracks().forEach(i=>i.stop()),A.current&&cancelAnimationFrame(A.current),K.current&&K.current.disconnect(),U.current&&U.current.state!=="closed"&&U.current.close(),Y(!0),B(0),v(!1),r&&r())},W=()=>{A.current&&(cancelAnimationFrame(A.current),A.current=null),_.current&&(cancelAnimationFrame(_.current),_.current=null),S.current&&(S.current.removeEventListener("dataavailable",ve),S.current.stop(),S.current=null),f==null||f.getTracks().forEach(i=>i.stop()),a!=null&&a.current&&(a.current.removeEventListener("ended",pe),a.current.pause(),a.current.src="",a.current=null),U.current=null,q.current=null,he.current=null,K.current=null,p(null),ue(!1),g(!1),de(!1),Y(!1),G(null),J(null),B(0),ne(0),b(0),se(""),R(0),H(!0),v(!1),fe(!1),$(new Uint8Array(0)),ae(null),oe(!0),o&&o()},Ee=()=>{if(a.current&&a.current.paused){const i=a.current.play();i!==void 0&&i.catch(d=>{console.error(d),m&&m(d instanceof Error?d:new Error("Error playing audio"))})}},ee=()=>{!a.current||z||(requestAnimationFrame(De),Ee(),a.current.addEventListener("ended",pe),H(!1),y&&ie===0&&y(),M&&ie!==0&&M())},te=()=>{if(!a.current||z)return;_.current&&cancelAnimationFrame(_.current),a.current.removeEventListener("ended",pe),a.current.pause(),H(!0);const i=a.current.currentTime;R(i),a.current.currentTime=i,l&&l()},C=()=>{var i,d,k;if(z){v(V=>!V),((i=S.current)==null?void 0:i.state)==="recording"?((d=S.current)==null||d.pause(),B(V=>V+(performance.now()-me)),A.current&&cancelAnimationFrame(A.current),n&&n()):(A.current=requestAnimationFrame(Q),(k=S.current)==null||k.resume(),ne(performance.now()),s&&s());return}a.current&&ge&&(a.current.paused?ee():te())},pe=()=>{_.current&&cancelAnimationFrame(_.current),H(!0),a!=null&&a.current&&(a.current.currentTime=0,R(0),h&&h())},I=()=>{var d;if(!Z)return;const i=document.createElement("a");i.href=Z,i.download=`recorded_audio${qe((d=S.current)==null?void 0:d.mimeType)}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(Z)};return{audioRef:a,isRecordingInProgress:z,isPausedRecording:w,audioData:u,recordingTime:re,isProcessingRecordedAudio:Te,recordedBlob:O,mediaRecorder:S.current,duration:P,currentAudioTime:ie,audioSrc:Z,isPausedRecordedAudio:we,bufferFromRecordedBlob:N,isCleared:ce,isAvailableRecordedAudio:ge,formattedDuration:Ie,formattedRecordingTime:Ce,formattedRecordedAudioCurrentTime:j,startRecording:$e,togglePauseResume:C,startAudioPlayback:ee,stopAudioPlayback:te,stopRecording:Ae,saveAudioFile:I,clearCanvas:W,setCurrentAudioTime:R,error:ze,isProcessingOnResize:X,isProcessingStartRecording:Ne,isPreloadedBlob:_e,setPreloadedAudioBlob:Me,_setIsProcessingAudioOnComplete:Y,_setIsProcessingOnResize:fe}}x.VoiceVisualizer=ct,x.useVoiceVisualizer=ot,Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})});
